"use strict";!function(e){function n(n){var o=e(n);o.length&&o.parsley().on("form:success",function(e){return app.notifier.showSuccess("You have been successfully subscribed!"),!1}).on("form:error",function(e){return app.notifier.showError("Subscription failed! Please try again."),!1})}function o(n){var o=e(n);if(o.length){o.find(":submit");o.parsley()}}function a(n){var o=e(n);if(o.length){app.createPhotoSwipe(n,{})}}function t(n){var o=e(n),a=e(".widget select");o.length&&o.select2({width:"100%"}),a.length&&a.select2({width:"100%"})}function i(n){var o=e(n);o.length&&o.find(".js-slick-slider").slick({dots:!1,infinite:!0,speed:300,slidesToShow:5,autoplay:!0,accessibility:!1,prevArrow:o.find(".js-partners-prev"),nextArrow:o.find(".js-partners-next"),responsive:[{breakpoint:1100,settings:{slidesToShow:4}},{breakpoint:1e3,settings:{slidesToShow:3}},{breakpoint:768,settings:{slidesToShow:1}}]})}function s(n){var o=e(n);o.length&&plyr.setup()}function r(n){var o=e(n);o.length&&o.find(".js-slick-slider").slick({dots:!0,infinite:!0,speed:800,slidesToShow:1,autoplay:!0,autoplaySpeed:5e3})}function l(n){function o(){l||"lg"===app.gridSize.get()&&requestAnimationFrame(function(){s.hasClass("navbar--overlay")&&(i.addClass("header--white"),s.addClass("navbar--overlay-map")),r.addClass("opened"),t.addClass("form--white"),l=!0})}var a=e(n);if(a.length){var t=a.find(".js-search-form"),i=e(".header"),s=e("#header-nav"),r=a.find(".map");a.addClass("banner--play"),t.on("formChange",_.throttle(o,500)),c(n),b(".js-map-index-canvas");var l=!1}}function c(n){if(e("#banner-line").length){var o=e(n),a=o.find(".js-search-form");new app.Vivus("banner-line",{type:"async",start:"autostart",ignoreInvisible:!1,duration:50},function(){var n=e("#banner-line").closest(".slider__item");n.hasClass("slick-slide")&&!n.hasClass("slick-active")||(o.find(".js-arrow-end").css({opacity:1}),a.addClass("form--anim"))})}}function p(n){var o=e(n);if(o.length){var a=o.find(".js-slick-slider");a.slick({dots:!1,infinite:!0,speed:300,slidesToShow:1,lazyLoad:"progressive",prevArrow:o.find(".js-banner-prev"),nextArrow:o.find(".js-banner-next"),responsive:[{breakpoint:1300,settings:{centerMode:!1,variableWidth:!1,arrows:!0}}]}),a.on("setPosition",function(e,n){o.addClass("slider--init")})}}function d(n){if("xs"!==app.gridSize.get()){var o=e(n),a=o.find(".js-slick-slider");a.slick({dots:!0,infinite:!0,autoplay:!0,autoplaySpeed:3e3,speed:600,slidesToShow:1,lazyLoad:"progressive",accessibility:!1,arrows:!1,focusOnSelect:!1})}}function g(n){var o=e(n);if(o.length){var a,t;o.each(function(){var n=e(this),o=n.find(".js-slick-slider"),i=n.siblings(".slider");a=i.find(".js-slick-slider"),o.slick({dots:!1,infinite:!0,speed:300,slidesToShow:1,centerMode:!1,arrows:!1,accessibility:!1,fade:!0}),t=a.html(),a.slick({slidesToShow:5,slidesToScroll:1,focusOnSelect:!0,arrows:!0,accessibility:!1,centerMode:!0,centerPadding:0,prevArrow:i.find(".js-slick-prev"),nextArrow:i.find(".js-slick-next"),responsive:[{breakpoint:768,settings:{slidesToShow:3}}]});var s,r=e(".js-slider-category");r.on("click",function(){r.removeClass("active"),e(this).addClass("active");var n,i=e(this).data("filter");a.slick("slickRemove",!0,!0,!0),n="all"===i?t:e(t).filter(".slider__item--"+i),a.slick("slickAdd",n),s=a.find(".slick-current").data("slide-rel"),o.slick("slickGoTo",s,!1)}),a.on("afterChange",function(e,n,t,i){s=a.find(".slick-current").data("slide-rel"),o.slick("slickGoTo",s,!1)}).on("click",".slider__item",function(){var n=e(this);s=e(n).data("slide-rel"),o.slick("slickGoTo",s,!1)})})}}function f(n){function o(){a.trigger("formChange")}var a=e(n),t=a.find(".js-select-checkboxes"),i=a.find(".js-select-checkboxes"),s=a.find(".js-search-range"),r=a.find('input[type="text"]'),l=a.find("textarea"),c=a.find("select"),p=a.find('input[type="checkbox"]');t.each(function(){var n=e(this),o=e(this).prev(".js-select-checkboxes-btn"),a=o.data("placeholder");n.find(".in-checkbox").change(function(){var n,t,i=[];n=e(this).closest(".js-select-checkboxes"),e(n).find(".in-checkbox:checked").each(function(){var n=e(this).next("label").text();i.push(n)}),t=i.join(", ")||a,e(o).text(t)})}),e(".js-select-checkboxes-reset").on("click",function(){var n=e(this),o=n.closest(".js-select-checkboxes");o.find('input[type="checkbox"]').prop({checked:!1,indeterminate:!1}),o.find('input[type="checkbox"]').first().trigger("change")}),e(".js-select-checkboxes-accept").on("click",function(){var n=e(this),o=n.closest(".js-select-checkboxes");o.closest(".dropdown").removeClass("open")}),e(".js-form-reset").on("click",function(){r.val(""),l.text(""),c.each(function(n,o){e(o).find("option").removeAttr("selected"),e(o).trigger("change")}),p.prop({checked:!1,indeterminate:!1}),i.each(function(n,o){e(o).find('input[type="checkbox"]').first().trigger("change")}),s.each(function(n,o){var a=e(o).data("ionRangeSlider");a.reset()})}),e("body").on("click",".js-dropdown-menu",function(e){e.stopPropagation()});var d=e(".js-checkboxes-tree");d.length&&(d.bonsai(),d.qubit());var g=_.debounce(o,500);s.on("change",g),r.on("input",o),l.on("change",o),c.on("change",o),p.on("change",o)}function m(){var n=e("#range_area"),o=e("#range_price"),a=e("#range_commision"),t=e("#range_room"),i=e("#range_ui");n.length&&n.ionRangeSlider({type:"double",min:0,max:2e3,hide_min_max:!0,hide_from_to:!1,grid:!1,postfix:" sq ft",force_edges:!0,step:10,max_postfix:"+",onFinish:app.rangeInputInteraction}),o.length&&o.ionRangeSlider({type:"double",min:0,max:5e6,hide_min_max:!0,hide_from_to:!1,grid:!1,prefix:"$",force_edges:!0,max_postfix:"+",step:1e3,prettify:function(e){return app.utils.abbreviateNumber(e)},onFinish:app.rangeInputInteraction}),t.length&&t.ionRangeSlider({type:"double",min:0,max:10,from:0,to:10,hide_min_max:!0,hide_from_to:!1,grid:!1,max_postfix:"+",onFinish:app.rangeInputInteraction}),a.length&&a.ionRangeSlider({type:"double",min:0,max:1e4,from:0,to:1e4,hide_min_max:!0,hide_from_to:!1,grid:!1,max_postfix:"+",prefix:"RM ",onFinish:app.rangeInputInteraction}),i.length&&i.ionRangeSlider({type:"double",min:1e3,max:2e3,from:1200,to:1800,hide_min_max:!0,hide_from_to:!1,grid:!1,onFinish:app.rangeInputInteraction})}function u(n){var o=e(n);o.length&&o.each(function(){var n=e(this),o=n.find(".js-slick-current"),a=n.find(".js-slick-total");n.find(".js-slick-slider").on("init",function(e,n){a.html(n.slideCount)}).slick({dots:!1,infinite:!0,speed:300,slidesToShow:1,centerMode:!1,prevArrow:n.find(".js-slick-prev"),nextArrow:n.find(".js-slick-next")}).on("afterChange",function(e,n,a){o.html(a+1+" /")})})}function h(n,o){var a=e(n);a.length&&!function(){var n=new google.maps.LatLng(o.lat,o.lng),t=e(".js-map-btn");app.createMap(a,t,function(){var e=new google.maps.Map(a[0],_.merge(T,{zoom:7,coordinates:n}));app.createGmapMarker.create(e,n,o.address)})}()}function v(n){var o=e(n);o.length&&o.on("click",function(){var n=e(this),o=n.data("state")||"success";return n.addClass("loading"),setTimeout(function(){n.addClass("progress")},500),setTimeout(function(){n.removeClass("loading"),n.removeClass("progress"),n.addClass(o)},1e3),!1})}function b(n,o){var a=e(n);if(a.length){var t=[];requestAnimationFrame(function(){app.createMap(a,e(".js-map-btn"),function(){var e=new google.maps.Map(a[0],T);t=[],_.each(o,function(n){var o=C(n),i=app.createGmapInfoboxMarker(e,new google.maps.LatLng(n.lat,n.lng),n.address,o,a.data("infoboxTheme"));t.push(i)}),app.createGmapClustering(e,t)})})}}function k(n,o,a){var t=e(n),i=e(o);if(t.length&&i){var s,r=new google.maps.LatLng(a.lat,a.lng),l=e(".js-map-btn"),c=e(".js-panorama-btn");app.createMap(t,l,function(){var e=new google.maps.Map(t[0],_.merge(T,{zoom:7,coordinates:r})),n=C(a);app.createGmapInfoboxMarker(e,r,a.address,n,t.data("infoboxTheme"))}),app.createMap(i,c,function(){new google.maps.StreetViewPanorama(i[0],{position:r,pov:{heading:34,pitch:10},zoomControl:!0,zoomControlOptions:{position:google.maps.ControlPosition.RIGHT_CENTER},panControl:!0,panControlOptions:{position:google.maps.ControlPosition.RIGHT_TOP}})}),s=l.add(c).filter(".active");var p=function(n){s&&s.removeClass("active"),s=e(n),s.addClass("active")};l.on("click",function(){"xs"!==app.gridSize.get()&&(p(this),i.css({zIndex:5}),t.css({zIndex:10}))}),c.on("click",function(){"xs"!==app.gridSize.get()&&(p(this),i.css({zIndex:10}),t.css({zIndex:5}))})}}function w(n){var o=e(n);if(o.length){var a=e(n+"-block");o.each(function(){e(this).parsley().on("form:success",function(e){return app.notifier.showSuccess("You have successfully submit the form!"),!1}).on("form:error",function(n){return app.notifier.showError("Submited failed! Please try again."),_.each(a,function(n){var o,a=e(n).find(".parsley-required"),t=e(n).attr("id");a.length&&(e(n).addClass("opened"),e('[data-rel="#'+t+'"]').addClass("active"),o=e(n).find("#autocomplete-map"),o.length&&google.maps.event.trigger(o[0],"resize"))}),!1})})}}function y(n){var o=e(n);o.length&&o.popover()}function j(n,o){var a=e(n);if(a.length){var t=e(".js-map-btn"),i=a.find(".js-map");app.createMap(i,t,function(){function n(e){p?p.setPosition(e):s(e.lat(),e.lng()),r(e.lat(),e.lng()),o(e)}function o(e){d.geocode({latLng:e},function(e,n){n==google.maps.GeocoderStatus.OK?e[0]?g[0].value=e[0].formatted_address:g[0].value="No results":g[0].value=n})}function t(){var e=h.getPlace();if(e.geometry){if(c.panTo(e.geometry.location),c.setZoom(15),p){var n=new google.maps.LatLng(e.geometry.location.A,e.geometry.location.F);p.setPosition(n)}else s(e.geometry.location.A,e.geometry.location.F);r(e.geometry.location.A,e.geometry.location.F)}else h.placeholder="Enter a address"}function s(e,o){var a=new google.maps.LatLng(e,o);p=app.createGmapMarker.createAdvanced({position:a,map:c,draggable:!0}),google.maps.event.addListener(p,"dragend",function(){n(p.getPosition())})}function r(e,n){f[0].value=e,f[1].value=n}function l(){for(var e=0;e<overlays.length;e++)overlays[e].overlay.setMap(null);overlays=[]}var c,p,d,g=a.find(".js-autocomplete"),f=a.find(".js-location-coords"),m=a.find(".js-remove-overlays"),u=!1;d=new google.maps.Geocoder,c=new google.maps.Map(i[0],T),google.maps.event.addListener(c,"click",function(e){n(e.latLng)}),app.geolocation.activate(c,{buttonTrigger:a.find(".js-geolocate"),onSuccess:function(e){n(e)}});var h=new google.maps.places.Autocomplete(g[0],T.autocomplete);google.maps.event.addListener(h,"place_changed",t),g.on("keypress",function(e){return 13==e.keyCode?!1:void 0});var v=new google.maps.drawing.DrawingManager({drawingControl:!0,drawingControlOptions:{position:google.maps.ControlPosition.TOP_RIGHT,drawingModes:[google.maps.drawing.OverlayType.POLYGON]}});u||v.setMap(c),google.maps.event.addListener(v,"overlaycomplete",function(e){overlays.push(e)}),f.on("input",function(n){if(e.isNumeric(f[0].value())&&e.isNumeric(f[1].value())){var a=new google.maps.LatLng(f[0].value(),f[1].value());if(p?p.setPosition(a):s(a.lat(),a.lng()),c.panTo(a),o(a),13==n.keyCode)return!1}}),m.on("click",function(){l()})})}}function x(n,o){var a=e(n);if(a.length){var t,i=new L.LatLng(33.74229160384012,-117.86845207214355),s=!1;app.createMap(a,e(".js-map-btn"),function(){if(s)t.invalidateSize();else{t=L.map(a[0],_.merge({zoom:10,center:i,zoomControl:!1,scrollWheelZoom:!1})),L.tileLayer("http://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png",{maxZoom:19,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>, Tiles courtesy of <a href="http://hot.openstreetmap.org/" target="_blank">Humanitarian OpenStreetMap Team</a>'}).addTo(t);var e=L.control.zoom({position:"topright"});e.addTo(t),t.invalidateSize(),_.each(o,function(e){var n=C(e);app.createLeafletInfoboxMarker(t,new L.LatLng(e.lat,e.lng),e.address,n,a.data("infoboxTheme"))})}s=!0})}}function C(e){var n;return n="assets/media-demo/properties/277x180/"+e.image+".jpg","<span class='map__address'>"+e.address+"</span> <span class='map__info'><img  class='map__photo' src='"+n+"'/><span class='map__details'> <dl><dt>Type:</dt> <dd>"+e.type+"</dd></dl><dl><dt>Area:</dt> <dd>"+e.area+" m2</dd></dl><dl><dt>Bedrooms:</dt> <dd>"+e.bedrooms+"</dd></dl></span></span> <span class='map__price'><strong>$"+e.price+"</strong></span> <a  class='map__more' href='property_details.html'>Details</a>"}app.initTheme({colorTheme:"default",loadSvgWithAjax:!1}),app.activateHeaderSpy(),app.activateScrollToTopSpy(),app.scrollAnimation(),app.activateUIPanel();var T={zoom:10,center:new google.maps.LatLng(33.74229160384012,-117.86845207214355),scrollwheel:!1,zoomControl:!0,mapTypeControl:!0,autocomplete:{componentRestrictions:{country:"us"}},mapTypeControlOptions:{position:google.maps.ControlPosition.LEFT_TOP},zoomControlOptions:{position:google.maps.ControlPosition.RIGHT_CENTER},scaleControl:!0,scaleControlOptions:{position:google.maps.ControlPosition.RIGHT_TOP},panControl:!0,panControlOptions:{position:google.maps.ControlPosition.RIGHT_TOP}};s(".player"),i("#partners-slider"),t("select.form-control"),f(".js-search-form"),a(".js-gallery-item"),o(".js-contact-form"),n(".js-subscribe-form"),r("#review-slider"),l(".js-banner"),p("#slider-wide"),d(".js-banner-slider"),g(".js-slider-thumbs"),b(".js-map-index-canvas",window.demodata),b(".js-map-canvas-fullscreen",window.demodata),k('.js-map-canvas[data-type="map"]','.js-map-canvas[data-type="panorama"]',window.demodata[3]),w(".js-form"),m(),u(".js-slick-blog"),u(".js-slick-plan"),u("#counter-slider"),u("#properties-banner"),h(".js-map-canvas-contact",window.demodata[3]),v(".js-btn-demo"),y(".js-popover"),j(".js-map-location-dashboard-submit",{lat:37.7749295,lng:-122.41941550000001}),j(".js-map-location-dashboard",{lat:37.7749295,lng:-122.41941550000001}),j(".js-map-location-dashboard-hidden",{lat:37.7749295,lng:-122.41941550000001}),x(".js-map-canvas-leaflet",window.demodata)}(jQuery);